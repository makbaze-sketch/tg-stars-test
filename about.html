<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Qleweta ‚Äî –°—Ç–∞—Ç—É—Å & –î–∏—Å–∫–ª–µ–π–º–µ—Ä</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <meta name="color-scheme" content="dark light">
  <style>
    :root{
      --bg:#0b0c10; --card:#131419; --stroke:#22242B; --text:#F3F4F8; --muted:#A8AAB6;
      --accent:#7C5CFF; --accent2:#00D1FF; --ok:#73FFBF; --warn:#FFD166;
      --shadow: 0 20px 60px rgba(0,0,0,.55);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; color:var(--text); font:16px/1.5 system-ui,-apple-system,Segoe UI,Roboto;
      background:
        radial-gradient(60% 60% at 80% 10%, rgba(124,92,255,.18), transparent 60%),
        radial-gradient(50% 50% at 10% 90%, rgba(0,200,255,.12), transparent 60%),
        var(--bg);
      overflow-x:hidden;
    }

    .wrap{min-height:100%; display:grid; grid-template-rows:auto 1fr auto; padding:18px 12px 84px}
    .card{
      width:min(1000px, 98vw);
      margin:0 auto;
      background:linear-gradient(180deg,rgba(255,255,255,.04),rgba(255,255,255,.02));
      border:1px solid var(--stroke); border-radius:22px; padding:16px;
      backdrop-filter:blur(8px); box-shadow:var(--shadow);
    }
    .head{display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom:10px}
    .title{display:flex; align-items:center; gap:12px}
    .logo{
      width:40px;height:40px;border-radius:12px;
      background:conic-gradient(from 0deg,var(--accent),var(--accent2),var(--accent));
      box-shadow:0 0 24px rgba(124,92,255,.45), inset 0 0 22px rgba(255,255,255,.08);
      animation:spin 10s linear infinite;
    }
    @keyframes spin { from{rotate:0} to{rotate:360deg} }
    h1{margin:0;font-size:22px} .sub{margin:4px 0 0;color:var(--muted);font-size:14px}
    .badges{display:flex; gap:8px; flex-wrap:wrap}
    .badge{font-size:12px; padding:6px 10px; border-radius:999px; border:1px solid var(--stroke); background:#0f1015aa}
    .badge.warn{border-color:rgba(255,209,102,.4); background:rgba(255,209,102,.08)}

    /* tabs */
    .tabs{display:flex; gap:8px; flex-wrap:wrap; margin:10px 0 12px}
    .tab{
      border:1px solid var(--stroke); background:#14151b; color:var(--text); padding:10px 14px;
      border-radius:12px; cursor:pointer; user-select:none;
      transition:transform .12s, box-shadow .2s;
    }
    .tab:hover{ transform:translateY(-1px); box-shadow:0 0 22px rgba(124,92,255,.25)}
    .tab.active{ outline:2px solid rgba(124,92,255,.45) }

    .section{ display:none }
    .section.active{ display:block; }

    /* blocks */
    .grid{display:grid; gap:12px}
    .block{
      border:1px solid var(--stroke); border-radius:16px; background:#0f1015; padding:14px 14px 12px;
    }
    .block h3{margin:0 0 8px; font-size:16px}
    .muted{color:var(--muted)}
    .list{display:grid; gap:10px; margin-top:6px}
    .row{display:flex; gap:10px; align-items:flex-start}
    .dot{width:8px;height:8px;border-radius:50%;background:var(--accent2);margin-top:8px;box-shadow:0 0 10px var(--accent2)}

    /* footer bar */
    .footer{
      position:fixed; left:0; right:0; bottom:0;
      background:rgba(15,16,21,.85); backdrop-filter:blur(8px);
      border-top:1px solid var(--stroke); padding:10px 12px;
      display:flex; justify-content:center;
    }
    .btn{
      border:1px solid var(--stroke); background:#1b1c22; color:var(--text);
      border-radius:12px; padding:12px 16px; text-decoration:none; font-weight:800; cursor:pointer;
      box-shadow:0 0 0 rgba(124,92,255,0); transition:transform .12s, box-shadow .2s;
    }
    .btn:hover{ transform:translateY(-1px); box-shadow:0 0 26px rgba(124,92,255,.35) }
    .btn.primary{ border-color:rgba(124,92,255,.45) }

    /* canvas holder */
    .canvas-wrap{
      position:relative; border:1px dashed rgba(255,255,255,.08);
      border-radius:14px; overflow:hidden; background:radial-gradient(120% 120% at 10% 0%, rgba(124,92,255,.18), transparent 60%), #0f1116;
    }
    canvas{ display:block; width:100%; height:360px; }
    .hint{position:absolute; right:10px; top:10px; font-size:12px; color:var(--muted); background:#0f1015aa; padding:6px 10px; border-radius:999px; border:1px solid var(--stroke)}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <div class="head">
        <div class="title">
          <div class="logo"></div>
          <div>
            <h1>Qleweta ‚Äî –°—Ç–∞—Ç—É—Å & –î–∏—Å–∫–ª–µ–π–º–µ—Ä</h1>
            <p class="sub">–ú–∏–Ω–∏-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ –∞–∫—Ç–∏–≤–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ</p>
          </div>
        </div>
        <div class="badges">
          <span class="badge warn">Beta</span>
          <span class="badge">–í–µ—Ä—Å–∏—è: 0.2</span>
          <span class="badge">–û–±–Ω–æ–≤–ª–µ–Ω–æ: —Å–µ–≥–æ–¥–Ω—è</span>
        </div>
      </div>

      <!-- Tabs -->
      <div class="tabs">
        <div class="tab active" data-tab="t1">–°—Ç–∞—Ç—É—Å</div>
        <div class="tab" data-tab="t2">–ö–∞–∫ —Å–¥–µ–ª–∞–Ω–æ</div>
        <div class="tab" data-tab="t3">–ü–µ—Å–æ—á–Ω–∏—Ü–∞</div>
      </div>

      <!-- Section 1: Status -->
      <section id="t1" class="section active">
        <div class="grid">
          <div class="block">
            <h3>–ß—Ç–æ —É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç</h3>
            <div class="list">
              <div class="row"><div class="dot"></div><div>–û—Ç–∫—Ä—ã—Ç–∏–µ –º–∏–Ω–∏-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –∏–∑ –±–æ—Ç–∞</div></div>
              <div class="row"><div class="dot"></div><div>–û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–∫–∞–∑–∞ –≤ —á–∞—Ç –∏ –µ–¥–∏–Ω–∏—á–Ω—ã–π –∏–Ω–≤–æ–π—Å –≤ Stars</div></div>
              <div class="row"><div class="dot"></div><div>–ü—Ä–æ—Ñ–∏–ª—å: —Å—É–º–º–∞ –ø–æ—Ç—Ä–∞—á–µ–Ω–Ω—ã—Ö –∑–≤—ë–∑–¥ –∏ —É—Ä–æ–≤–µ–Ω—å</div></div>
            </div>
          </div>

          <div class="block">
            <h3>–í–∞–∂–Ω–æ –∑–Ω–∞—Ç—å</h3>
            <p class="muted" style="margin:6px 0 0">
              –ü—Ä–æ–µ–∫—Ç –≤ beta-—Å—Ç–∞–¥–∏–∏. –í–æ–∑–º–æ–∂–Ω—ã –±–∞–≥–∏, –∑–∞–¥–µ—Ä–∂–∫–∏ –∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ª–æ–≥–∏–∫–∏ –±–µ–∑ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è.
              –ü–µ—Ä–µ–¥ –ø–æ–∫—É–ø–∫–æ–π —É–±–µ–¥–∏—Å—å, —á—Ç–æ –ø–æ–Ω–∏–º–∞–µ—à—å, —á—Ç–æ –∏–º–µ–Ω–Ω–æ –ø–æ–ª—É—á–∞–µ—à—å.
            </p>
          </div>

          <div class="block">
            <h3>–î–∏—Å–∫–ª–µ–π–º–µ—Ä</h3>
            <div class="list">
              <div class="row"><div class="dot"></div><div>–ü–æ–∫—É–ø–∫–∏ –≤ Stars –Ω–µ–æ–±—Ä–∞—Ç–∏–º—ã –ø–æ –ø—Ä–∞–≤–∏–ª–∞–º Telegram ‚Äî –≤–æ–∑–≤—Ä–∞—Ç–æ–≤ –Ω–µ—Ç.</div></div>
              <div class="row"><div class="dot"></div><div>–ö–æ–º–∞–Ω–¥–∞ –Ω–µ –Ω–µ—Å—ë—Ç –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –∑–∞ –¥–µ–π—Å—Ç–≤–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ —Å—Ç–æ—Ä–æ–Ω–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã.</div></div>
              <div class="row"><div class="dot"></div><div>–ò—Å–ø–æ–ª—å–∑—É—è –±–æ—Ç–∞, –≤—ã —Å–æ–≥–ª–∞—à–∞–µ—Ç–µ—Å—å —Å —ç—Ç–∏–º–∏ —É—Å–ª–æ–≤–∏—è–º–∏ –∏ –ª–æ–∫–∞–ª—å–Ω—ã–º–∏ –∑–∞–∫–æ–Ω–∞–º–∏.</div></div>
            </div>
          </div>

          <div class="block">
            <h3>–ß—Ç–æ –¥–∞–ª—å—à–µ</h3>
            <div class="list">
              <div class="row"><div class="dot"></div><div>–ò—Å—Ç–æ—Ä–∏—è –ø–æ–∫—É–ø–æ–∫, —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞, —É–ª—É—á—à–µ–Ω–∏—è UX –Ω–∞ iOS.</div></div>
              <div class="row"><div class="dot"></div><div>–ù–æ–≤—ã–µ –ø–∞–∫–µ—Ç—ã –∏ —Ä–æ–ª–∏: Mini ‚Üí Plus ‚Üí Ultra.</div></div>
            </div>
          </div>
        </div>
      </section>

      <!-- Section 2: How it's made -->
      <section id="t2" class="section">
        <div class="grid">
          <div class="block">
            <h3>–ö–∞–∫ —ç—Ç–æ —Å–¥–µ–ª–∞–Ω–æ</h3>
            <p class="muted" style="margin:6px 0 8px">
              –≠—Ç–æ—Ç –±–æ—Ç –∏ –æ–±–∞ –º–∏–Ω–∏-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å–æ–±—Ä–∞–Ω—ã –≤ ChatGPT ‚Äî –æ—Ç –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –∏ –ø–∞–π–ø–ª–∞–π–Ω–∞ –¥–æ –∫–æ–¥–∞ –∏ UI.
            </p>
            <div class="list">
              <div class="row"><div class="dot"></div><div><b>–ë–æ—Ç:</b> aiogram v3, SQLite, –∞–Ω—Ç–∏-–¥—É–±–ª–∏ –∏–Ω–≤–æ–π—Å–æ–≤ –∏ –∏–Ω—Ñ–æ, —á–∏—Å—Ç—ã–π —á–∞—Ç.</div></div>
              <div class="row"><div class="dot"></div><div><b>WebApp:</b> —á–∏—Å—Ç—ã–π HTML/CSS/JS, glow-—Å—Ç–∏–ª—å, –ª—ë–≥–∫–∏–µ –∞–Ω–∏–º–∞—Ü–∏–∏, –±–µ–∑ –±–∏–±–ª–∏–æ—Ç–µ–∫.</div></div>
              <div class="row"><div class="dot"></div><div><b>UX:</b> –ø–æ–∫—É–ø–∫–∞ —á–µ—Ä–µ–∑ <code>sendData ‚Üí close()</code>, —á—Ç–æ–±—ã —Å—Ä–∞–∑—É –≤–µ—Ä–Ω—É—Ç—å—Å—è –≤ —á–∞—Ç –±–µ–∑ –ø–æ–ø–∞–ø–æ–≤.</div></div>
              <div class="row"><div class="dot"></div><div><b>iOS/–ü–ö:</b> –±–µ—Ä–µ–∂–Ω—ã–π —Ä–µ–∂–∏–º ‚Äî –±–µ–∑ –¥–∏–ø–ª–∏–Ω–∫–æ–≤, –≤—Å—ë –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ —Å—Ç–∞–±–∏–ª—å–Ω–æ.</div></div>
            </div>
          </div>

          <div class="block">
            <h3>–§–∏–ª–æ—Å–æ—Ñ–∏—è</h3>
            <p class="muted" style="margin:6px 0 0">
              –ú–∏–Ω–∏–º—É–º —Ç—Ä–µ–Ω–∏—è, –º–∞–∫—Å–∏–º—É–º —è—Å–Ω–æ—Å—Ç–∏. –°–Ω–∞—á–∞–ª–∞ ‚Äî –ø—Ä–æ—Å—Ç–∞—è —Å—Ç–∞–±–∏–ª—å–Ω–∞—è –æ—Å–Ω–æ–≤–∞, –ø–æ—Ç–æ–º —Ñ–∏—à–∫–∏ –∏ –∫—Ä–∞—Å–æ—Ç–∞.
            </p>
          </div>
        </div>
      </section>

      <!-- Section 3: Playground -->
      <section id="t3" class="section">
        <div class="block">
          <h3>Glow-Stickman (–ø–µ—Ä–µ—Ç–∞—â–∏ –º–µ–Ω—è)</h3>
          <div class="canvas-wrap">
            <canvas id="play"></canvas>
            <div class="hint">—Ç–∞—â–∏ –∑–∞ –ª—é–±—É—é —Ç–æ—á–∫—É ‚Ä¢ –≥—Ä–∞–≤–∏—Ç–∞—Ü–∏—è ‚Ä¢ –æ—Ç—Å–∫–æ–∫–∏</div>
          </div>
        </div>
      </section>
    </div>
  </div>

  <!-- bottom bar -->
  <div class="footer">
    <button class="btn primary" id="closeBtn">üîô –í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –±–æ—Ç–∞</button>
  </div>

  <script>
    // Telegram WebApp init
    if (window.Telegram?.WebApp) {
      Telegram.WebApp.ready();
      Telegram.WebApp.expand();
    }

    // Tabs
    const tabs = document.querySelectorAll('.tab');
    const sections = document.querySelectorAll('.section');
    tabs.forEach(t => t.addEventListener('click', () => {
      tabs.forEach(x => x.classList.remove('active'));
      sections.forEach(s => s.classList.remove('active'));
      t.classList.add('active');
      document.getElementById(t.dataset.tab).classList.add('active');
      try { Telegram.WebApp?.HapticFeedback?.impactOccurred('light'); } catch(e){}
    }));

    // Close button -> just close webapp
    document.getElementById('closeBtn').addEventListener('click', ()=>{
      try { Telegram.WebApp.close(); } catch(e){}
    });

    // ============== Glow Stickman Physics (Canvas, no libs) ==============
    const canvas = document.getElementById('play');
    const ctx = canvas.getContext('2d');

    function resize(){
      const w = canvas.parentElement.clientWidth;
      const h = 360;
      canvas.width = Math.floor(w * devicePixelRatio);
      canvas.height = Math.floor(h * devicePixelRatio);
      canvas.style.width = w + 'px';
      canvas.style.height = h + 'px';
      scale = devicePixelRatio;
    }
    let scale = 1;
    resize();
    addEventListener('resize', resize);

    // simple Verlet particles
    class P {
      constructor(x,y,lock=false){
        this.x = this.px = x; this.y = this.py = y; this.lock = lock;
        this.ax = 0; this.ay = 0;
      }
      addForce(fx,fy){ this.ax += fx; this.ay += fy; }
      integrate(dt){
        if (this.lock) { this.ax = this.ay = 0; return; }
        const nx = this.x + (this.x - this.px) + this.ax*dt*dt;
        const ny = this.y + (this.y - this.py) + this.ay*dt*dt;
        this.px = this.x; this.py = this.y;
        this.x = nx; this.y = ny;
        this.ax = 0; this.ay = 0;
      }
      constrain(w,h){
        const r = 10;
        if (this.x < r){ this.x = r; }
        if (this.x > w-r){ this.x = w-r; }
        if (this.y < r){ this.y = r; }
        if (this.y > h-r){ this.y = h-r; }
      }
    }
    class Stick {
      constructor(a,b,len,stiff=1){ this.a=a; this.b=b; this.len=len; this.stiff=stiff; }
      satisfy(){
        const dx = this.b.x - this.a.x, dy = this.b.y - this.a.y;
        let d = Math.hypot(dx,dy) || 1;
        const diff = (d - this.len)/d * this.stiff;
        const offx = dx*diff*0.5, offy = dy*diff*0.5;
        if (!this.a.lock){ this.a.x += offx; this.a.y += offy; }
        if (!this.b.lock){ this.b.x -= offx; this.b.y -= offy; }
      }
    }

    // build stickman
    const W = ()=>canvas.width/scale, H = ()=>canvas.height/scale;
    const cx = 0.5*W(), cy = 0.3*H();
    const head = new P(cx, cy-30);
    const neck = new P(cx, cy);
    const hip  = new P(cx, cy+40);
    const lsh  = new P(cx-28, cy+2), rsh = new P(cx+28, cy+2);
    const lel  = new P(cx-52, cy+34), rel = new P(cx+52, cy+34);
    const lwr  = new P(cx-70, cy+70), rwr = new P(cx+70, cy+70);
    const lk   = new P(cx-16, cy+78), rk  = new P(cx+16, cy+78);
    const laf  = new P(cx-22, cy+120), raf = new P(cx+22, cy+120);

    const pts = [head, neck, hip, lsh, rsh, lel, rel, lwr, rwr, lk, rk, laf, raf];
    const sticks = [
      new Stick(head, neck, 30, 0.9),
      new Stick(neck, hip,  40, 0.9),
      new Stick(neck, lsh,  28, 0.9), new Stick(lsh, lel, 34, 0.9), new Stick(lel, lwr, 38, 0.9),
      new Stick(neck, rsh,  28, 0.9), new Stick(rsh, rel, 34, 0.9), new Stick(rel, rwr, 38, 0.9),
      new Stick(hip, lk,    42, 0.9), new Stick(lk, laf,  44, 0.9),
      new Stick(hip, rk,    42, 0.9), new Stick(rk, raf,  44, 0.9),
      // —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ç–æ—Ä—ã (–¥–∏–∞–≥–æ–Ω–∞–ª–∏) –¥–ª—è —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏
      new Stick(lsh, rsh, 56, 0.5),
      new Stick(lk,  rk,  32, 0.4)
    ];

    // drag
    let dragging = null;
    let offsetX = 0, offsetY = 0;

    function screenToWorld(e){
      const rect = canvas.getBoundingClientRect();
      const x = (('touches' in e) ? e.touches[0].clientX : e.clientX) - rect.left;
      const y = (('touches' in e) ? e.touches[0].clientY : e.clientY) - rect.top;
      return { x: x, y: y };
    }
    function down(e){
      const p = screenToWorld(e);
      // closest point
      let best = null, bestD = 1e9;
      for (const pt of pts){
        const d = Math.hypot(pt.x*scale - p.x, pt.y*scale - p.y);
        if (d < bestD){ bestD = d; best = pt; }
      }
      if (best && bestD < 42){
        dragging = best;
        dragging.px = dragging.x; dragging.py = dragging.y;
        offsetX = dragging.x*scale - p.x; offsetY = dragging.y*scale - p.y;
        e.preventDefault();
      }
    }
    function move(e){
      if (!dragging) return;
      const p = screenToWorld(e);
      dragging.x = (p.x + offsetX)/scale;
      dragging.y = (p.y + offsetY)/scale;
      dragging.px = dragging.x; dragging.py = dragging.y; // ¬´–¥–µ—Ä–∂–∏–º¬ª –ø–æ–¥ –∫—É—Ä—Å–æ—Ä–æ–º
    }
    function up(){ dragging = null; }

    canvas.addEventListener('mousedown', down);
    canvas.addEventListener('mousemove', move);
    addEventListener('mouseup', up);
    canvas.addEventListener('touchstart', down, {passive:false});
    canvas.addEventListener('touchmove', move, {passive:false});
    addEventListener('touchend', up);

    // physics loop
    let last = performance.now();
    function tick(now){
      const dtMs = Math.min(32, now - last); last = now;
      const dt = dtMs/1000;

      // gravity
      for (const p of pts) p.addForce(0, 900); // px/s^2

      // integrate
      for (const p of pts) p.integrate(dt);

      // satisfy constraints a few iterations
      for (let i=0;i<4;i++){
        for (const s of sticks) s.satisfy();
        for (const p of pts) p.constrain(W(), H());
      }

      // render
      const ctx2 = ctx;
      ctx2.save();
      ctx2.scale(scale, scale);
      ctx2.clearRect(0,0,W(),H());

      // glow style
      ctx2.lineWidth = 4;
      ctx2.lineCap = 'round';
      ctx2.shadowBlur = 18;
      ctx2.shadowColor = 'rgba(124,92,255,.65)';
      ctx2.strokeStyle = 'rgba(180,170,255,.95)';

      // draw bones
      ctx2.beginPath();
      const lines = [
        [head, neck], [neck, hip],
        [neck, lsh], [lsh, lel], [lel, lwr],
        [neck, rsh], [rsh, rel], [rel, rwr],
        [hip, lk], [lk, laf],
        [hip, rk], [rk, raf],
        [lsh, rsh], [lk, rk]
      ];
      for (const [a,b] of lines){
        ctx2.moveTo(a.x, a.y); ctx2.lineTo(b.x, b.y);
      }
      ctx2.stroke();

      // head glow
      ctx2.shadowBlur = 22;
      ctx2.fillStyle = 'rgba(124,92,255,.9)';
      ctx2.beginPath(); ctx2.arc(head.x, head.y, 10, 0, Math.PI*2); ctx2.fill();

      // joints
      ctx2.shadowBlur = 10; ctx2.fillStyle = 'rgba(0,209,255,.9)';
      for (const p of pts){
        ctx2.beginPath(); ctx2.arc(p.x, p.y, 3, 0, Math.PI*2); ctx2.fill();
      }

      ctx2.restore();
      requestAnimationFrame(tick);
    }
    requestAnimationFrame(tick);
  </script>
</body>
</html>
